import asyncio
from aiogram import Bot, Dispatcher, types
from aiogram.contrib.fsm_storage.memory import MemoryStorage
import logging

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)

# –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –°–í–û–ô!)
API_TOKEN = '–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê'

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
bot = Bot(token=API_TOKEN)
storage = MemoryStorage()
dp = Dispatcher(bot, storage=storage)

# ==================== –ö–û–ú–ê–ù–î–ê /START ====================
@dp.message_handler(commands=['start'])
async def cmd_start(message: types.Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start - –ø–µ—Ä–≤–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ"""
    # –ü–æ–ª—É—á–∞–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_name = message.from_user.first_name
    
    # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π –°—Ç–∞—Ä—Ç
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    start_button = types.KeyboardButton("üöÄ –°—Ç–∞—Ä—Ç")
    keyboard.add(start_button)
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    await message.answer(
        f"üåü –ü—Ä–∏–≤–µ—Ç, {user_name}!\n\n"
        "–Ø NutriDiary Bot - –ø–æ–º–æ—â–Ω–∏–∫ –æ—Ç –ö–∞—Ç–∏ (—Ç–æ–≥–æ —Å–∞–º–æ–≥–æ –Ω–µ–∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∞ üòâ).\n\n"
        "–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ:\n"
        "üçé –£–ª—É—á—à–∏—Ç—å –ø–∏—Ç–∞–Ω–∏–µ –±–µ–∑ —Ñ–∞–Ω–∞—Ç–∏–∑–º–∞\n"
        "üß† –ù–∞–π—Ç–∏ —ç–Ω–µ—Ä–≥–∏—é –¥–ª—è —É—á—ë–±—ã/—Ä–∞–±–æ—Ç—ã\n"
        "‚ö° –°–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å–æ —Å—Ä—ã–≤–∞–º–∏ –±–µ–∑ —á—É–≤—Å—Ç–≤–∞ –≤–∏–Ω—ã\n"
        "üç≥ –ì–æ—Ç–æ–≤–∏—Ç—å –±—ã—Å—Ç—Ä–æ (–¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –ª—é–±–∏—à—å –≥–æ—Ç–æ–≤–∏—Ç—å)\n\n"
        "–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É üöÄ –°—Ç–∞—Ä—Ç —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å!\n\n"
        "*P.S. –í—Å–µ —Å–æ–≤–µ—Ç—ã - —ç—Ç–æ ¬´–æ–ø–æ—Ä—ã¬ª, –∞ –Ω–µ –ø—Ä–∞–≤–∏–ª–∞. –ë–µ—Ä–∏ —Ç–æ, —á—Ç–æ –æ—Ç–∑—ã–≤–∞–µ—Ç—Å—è, –∏ –∞–¥–∞–ø—Ç–∏—Ä—É–π –ø–æ–¥ —Å–≤–æ—é –∂–∏–∑–Ω—å.*",
        reply_markup=keyboard,
        parse_mode="Markdown"
    )

# ==================== –ö–ù–û–ü–ö–ê "üöÄ –°–¢–ê–†–¢" ====================
@dp.message_handler(lambda message: message.text == "üöÄ –°—Ç–∞—Ä—Ç")
async def handle_start_button(message: types.Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –°—Ç–∞—Ä—Ç - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"""
    # –°–æ–∑–¥–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏ (2 –∫–æ–ª–æ–Ω–∫–∏)
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    
    buttons = [
        types.KeyboardButton("üìö –£—á—ë–±–∞ –≤ —Ä–∏—Ç–º–µ –∂–∏–∑–Ω–∏"),
        types.KeyboardButton("üçé –ü–∏—Ç–∞–Ω–∏–µ –¥–ª—è –∑–∞–Ω—è—Ç—ã—Ö"),
        types.KeyboardButton("‚öñÔ∏è –ë–∞–ª–∞–Ω—Å –±–µ–∑ –Ω–∞–¥—Ä—ã–≤–∞"),
        types.KeyboardButton("‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã"),
        types.KeyboardButton("üìù –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å"),
        types.KeyboardButton("üíæ –î–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è"),
        types.KeyboardButton("üë• –û –Ω–∞—Å"),
        types.KeyboardButton("üéÅ –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫")
    ]
    keyboard.add(*buttons)
    
    await message.answer(
        "–û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π –Ω–∞—á–Ω—ë–º.\n\n"
        "üëá –í—ã–±–µ—Ä–∏, —á—Ç–æ —Ç–µ–±—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:",
        reply_markup=keyboard
    )

# ==================== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ====================
@dp.message_handler(lambda message: message.text == "üìö –£—á—ë–±–∞ –≤ —Ä–∏—Ç–º–µ –∂–∏–∑–Ω–∏")
async def handle_study(message: types.Message):
    """–†–∞–∑–¥–µ–ª '–£—á—ë–±–∞ –≤ —Ä–∏—Ç–º–µ –∂–∏–∑–Ω–∏'"""
    await message.answer(
        "üìö **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é: ¬´–ú–æ–π –ª–∞–π—Ñ—Ö–∞–∫: –∫–∞–∫ –µ—Å—Ç—å, —á—Ç–æ–±—ã —É—á–∏—Ç—å—Å—è –∏ –≤—Å—ë —É—Å–ø–µ–≤–∞—Ç—å¬ª**\n\n"
        "–ü—Ä–∏–≤–µ—Ç! –ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω–æ –≤—Å—ë, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏: "
        "–æ—Ç —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∑–∞ 5 –º–∏–Ω—É—Ç –¥–æ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å–ø–∞—Å–∞—é—Ç –æ—Ç —Å—Ä—ã–≤–æ–≤. "
        "–í—ã–±–∏—Ä–∞–π, —á—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.\n\n"
        "---\n\n"
        "üçé **1. –ú–æ—è –∫—É—Ö–Ω—è: —Ä–µ—Ü–µ–ø—Ç—ã –¥–ª—è –¥–Ω—è, –∫–æ–≥–¥–∞ –≤—Ä–µ–º—è –µ—Å—Ç—å, –Ω–æ –µ–≥–æ –Ω–µ—Ç**\n"
        "–ö–æ–≥–¥–∞ —Ç—ã –º–∞–º–∞, –º–µ–¥—Å–µ—Å—Ç—Ä–∞ –∏ —Å—Ç—É–¥–µ–Ω—Ç–∫–∞, ¬´–Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø–æ–µ—Å—Ç—å¬ª ‚Äî —ç—Ç–æ –∞–∫—Ç –∑–∞–±–æ—Ç—ã –æ —Å–µ–±–µ. "
        "–ó–¥–µ—Å—å ‚Äî –º–æ—è —Å–∏—Å—Ç–µ–º–∞ ¬´–∫—É—Ö–æ–Ω–Ω–æ–≥–æ –∫–æ–Ω–≤–µ–π–µ—Ä–∞¬ª –∏ —Ä–µ—Ü–µ–ø—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –¥–µ—Ç–∏ –≤ —Å–∞–¥."
    )

@dp.message_handler(lambda message: message.text == "üçé –ü–∏—Ç–∞–Ω–∏–µ –¥–ª—è –∑–∞–Ω—è—Ç—ã—Ö")
async def handle_nutrition(message: types.Message):
    """–†–∞–∑–¥–µ–ª '–ü–∏—Ç–∞–Ω–∏–µ –¥–ª—è –∑–∞–Ω—è—Ç—ã—Ö'"""
    await message.answer(
        "üçé **–ü–∏—Ç–∞–Ω–∏–µ –¥–ª—è –∑–∞–Ω—è—Ç—ã—Ö**\n\n"
        "–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ... –°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è —Ä–µ—Ü–µ–ø—Ç—ã –∏ —Å–æ–≤–µ—Ç—ã!"
    )

@dp.message_handler(lambda message: message.text == "‚öñÔ∏è –ë–∞–ª–∞–Ω—Å –±–µ–∑ –Ω–∞–¥—Ä—ã–≤–∞")
async def handle_balance(message: types.Message):
    """–†–∞–∑–¥–µ–ª '–ë–∞–ª–∞–Ω—Å –±–µ–∑ –Ω–∞–¥—Ä—ã–≤–∞'"""
    await message.answer(
        "‚öñÔ∏è **–ë–∞–ª–∞–Ω—Å –±–µ–∑ –Ω–∞–¥—Ä—ã–≤–∞**\n\n"
        "–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ... –°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è —Å–æ–≤–µ—Ç—ã –ø–æ –±–∞–ª–∞–Ω—Å—É!"
    )

@dp.message_handler(lambda message: message.text == "‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã")
async def handle_faq(message: types.Message):
    """–†–∞–∑–¥–µ–ª '–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã'"""
    await message.answer(
        "‚ùì **–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã**\n\n"
        "–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ... –°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –æ—Ç–≤–µ—Ç—ã –Ω–∞ —á–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã!"
    )

@dp.message_handler(lambda message: message.text == "üìù –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å")
async def handle_profile(message: types.Message):
    """–†–∞–∑–¥–µ–ª '–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å'"""
    await message.answer(
        "üìù **–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å**\n\n"
        "–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ... –ó–¥–µ—Å—å –±—É–¥–µ—Ç –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å!"
    )

@dp.message_handler(lambda message: message.text == "üíæ –î–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è")
async def handle_diary(message: types.Message):
    """–†–∞–∑–¥–µ–ª '–î–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è'"""
    await message.answer(
        "üíæ **–î–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è**\n\n"
        "–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ... –ó–¥–µ—Å—å –±—É–¥–µ—Ç –¥–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è!"
    )

@dp.message_handler(lambda message: message.text == "üë• –û –Ω–∞—Å")
async def handle_about(message: types.Message):
    """–†–∞–∑–¥–µ–ª '–û –Ω–∞—Å'"""
    await message.answer(
        "üë• **–û –Ω–∞—Å**\n\n"
        "–ü—Ä–∏–≤–µ—Ç! –†–∞–¥–∞, —á—Ç–æ —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –Ω–∞—à–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ üíñ\n\n"
        "–≠—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Ä–æ–¥–∏–ª–æ—Å—å –Ω–µ –∏–∑ –∂–µ–ª–∞–Ω–∏—è –ø–æ—É—á–∏—Ç—å. "
        "–û–Ω–æ —Ä–æ–¥–∏–ª–æ—Å—å –∏–∑ —Å—Ç—Ä–∞—Ö–∞, –±–µ—Å—Å–æ–Ω–Ω—ã—Ö –Ω–æ—á–µ–π –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è, —á—Ç–æ ¬´–∏–¥–µ–∞–ª—å–Ω–æ¬ª ‚Äî —ç—Ç–æ —Å–∫—É—á–Ω–æ –∏‚Ä¶ –Ω–µ–ø—Ä–∞–≤–¥–∏–≤–æ.\n\n"
        "–ö—Ç–æ —è? –ú–µ–Ω—è –∑–æ–≤—É—Ç –ö–∞—Ç—è. –Ø ‚Äî —á–µ–ª–æ–≤–µ–∫ –≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏:\n"
        "‚ñ™Ô∏è –í–µ—á–Ω–∞—è —Å—Ç—É–¥–µ–Ω—Ç–∫–∞: —É—á—É—Å—å –Ω–∞ –≤—Ä–∞—á–∞ –∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∞.\n"
        "‚ñ™Ô∏è –ü—Ä–∞–∫—Ç–∏–∫: —Ä–∞–±–æ—Ç–∞—é —Å—Ç–∞—Ä—à–µ–π –º–µ–¥—Å–µ—Å—Ç—Ä–æ–π.\n"
        "‚ñ™Ô∏è –ú–∞–º–∞: —Ä–∞—Å—Ç–∏—é –¥–≤–æ–∏—Ö –¥–µ—Ç–µ–π.\n"
        "‚ñ™Ô∏è –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å: –ø—ã—Ç–∞—é—Å—å –Ω–µ –∑–∞–±—ã—Ç—å –ø—Ä–æ —Å–µ–±—è –≤ —ç—Ç–æ–º –ø–æ—Ç–æ–∫–µ –∏ –∑–∞–º–µ—á–∞—Ç—å, —á—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.\n\n"
        "–ú–æ–π –≥–ª–∞–≤–Ω—ã–π –≤–æ–ø—Ä–æ—Å –∫ —Ç–µ–±–µ, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –∫–æ–≥–¥–∞-—Ç–æ –≤—Å—ë –Ω–∞—á–∞–ª–æ—Å—å:\n"
        "*–ê —á—Ç–æ –¥–ª—è —Ç–µ–±—è —Å–∞–º–æ–µ —Å–ª–æ–∂–Ω–æ–µ –≤ –±–∞–ª–∞–Ω—Å–µ –º–µ–∂–¥—É ¬´–Ω–∞–¥–æ¬ª, ¬´—Ö–æ—á—É¬ª –∏ ¬´–¥–æ–ª–∂–µ–Ω¬ª?*"
    )

@dp.message_handler(lambda message: message.text == "üéÅ –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫")
async def handle_gift(message: types.Message):
    """–†–∞–∑–¥–µ–ª '–ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–¥–∞—Ä–æ–∫'"""
    await message.answer(
        "üéÅ **–ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫**\n\n"
        "–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ... –°–∫–æ—Ä–æ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–¥–∞—Ä–æ–∫!"
    )

# ==================== –û–ë–†–ê–ë–û–¢–ö–ê –õ–Æ–ë–´–• –°–û–û–ë–©–ï–ù–ò–ô ====================
@dp.message_handler()
async def handle_any_message(message: types.Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ª—é–±—ã—Ö –¥—Ä—É–≥–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    await message.answer(
        "–Ø –ø–æ–∫–∞ —É–º–µ—é —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –º–µ–Ω—é üòä\n"
        "–ù–∞–∂–º–∏ –æ–¥–Ω—É –∏–∑ –∫–Ω–æ–ø–æ–∫ –Ω–∏–∂–µ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å /start",
        reply_markup=types.ReplyKeyboardRemove()
    )

# ==================== –ó–ê–ü–£–°–ö –ë–û–¢–ê ====================
async def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞"""
    print("–ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...")
    await dp.start_polling()

if __name__ == "__main__":
    asyncio.run(main())
